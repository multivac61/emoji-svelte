<script context="module">
	export const prerender = true;
</script>

<script>
	const movies = {
		'ğŸ‘¦ğŸ‘´ğŸš—â±': 'back to the future',
		'ğŸ‘¸ğŸŒ¹ğŸ»': 'beauty and the beast',
		'ğŸŒƒğŸ‡«ğŸ‡·ğŸ—¼': 'midnight in paris',
		'ğŸ‘¸ğŸ¸ğŸ‘‘': 'princess and the frog',
		'5ï¸âƒ£0ï¸âƒ£0ï¸âƒ£â˜€ï¸â¤ï¸': '500 days of summer',
		'ğŸ‘¨ğŸ»ğŸ‘¨ğŸ»â¤ï¸ğŸ—»': 'brokeback mountain',
		'ğŸ³â¡ğŸŒŠ': 'free willy',
		'âš¡ï¸ğŸ‘¦ğŸ”¨': 'thor',
		'ğŸ‘¨ğŸ»ğŸ¤': 'bohemian rhapsody',
		'ğŸ¼ğŸ‘Š': 'kung fu panda',
		'ğŸ‘¦ğŸ’â¡ï¸ğŸŒ‹': 'lord of the rings',
		'ğŸ‘½ğŸ“ğŸ‘¦ğŸš²ğŸŒ•': 'et',
		'ğŸ´ğŸ™â¤ï¸': 'eat, pray, love',
		'ğŸ‘‘ğŸ’¬ğŸ™': 'the kings speech',
		'ğŸâœˆï¸': 'snakes on a plane',
		'ğŸ›ğŸœğŸ': 'a bugs life',
		'ğŸ“±ğŸ': 'jobs',
		'â°ğŸ”§ğŸŠ': 'a clockwork orange',
		'ğŸ’ğŸ“º': 'the ring',
		'ğŸ‘¦âœ‚ï¸ğŸ™Œ': 'edward scissorhands',
		'ğŸŒğŸ™ˆğŸ™ŠğŸ™‰': 'planet of the apes',
		'ğŸ‘¦ğŸ«ğŸ­': 'charlie and the chocolate factory',
		'ğŸ›³ğŸ§Š': 'titanic'
	};

	let guess;
	let answer = undefined;
	$: emoji = random_emoji(answer);

	function random_emoji() {
		guess = ''

		if (answer === false) {
			return emoji;
		}
		const keys = Object.keys(movies);
		return keys[Math.floor(Math.random() * keys.length)];
	}

	function submit_guess() {
		answer = guess.toLowerCase().trim() === movies[emoji];
	}
</script>

<main class="flex flex-col items-center justify-center min-h-screen text-center">
	<h1 class="m-2 text-3xl py-7 md:text-6xl">Guess the ğŸ</h1>
	<h1 class="m-2 text-5xl py-7 tracking-[0.2em] md:text-9xl ">{emoji}</h1>
	<div class="flex item-center px-8 mt-10 text-gray-700">
		<form on:submit|preventDefault={submit_guess}>
			<input
				bind:value={guess}
				placeholder="Which movie?"
				class="p-2 text-center bg-gray-100 text-gray-600 m-2"
			/>
			<button class="px-8 p-2 text-xl font-bold">Guess</button>
		</form>
	</div>
	<div class="m-8 p-1">
		{#if answer == undefined}
			<p class="text-gray-600">You can do it ğŸ’ª</p>
			<p class="text-white">!</p>
		{:else if answer == true}
			<p class="text-green-600">Correct â˜‘ï¸</p>
			<p class="text-gray-200">Now try this one ğŸ™ˆ</p>
		{:else}
			<p class="text-red-600">Incorrect ğŸš½</p>
			<p class="text-gray-200">Try Again...</p>
		{/if}
	</div>
</main>